# Enhanced Prompt

**ID**: 0a08e77c-c06a-4ae2-8f01-5d7bb34a02ce
**Version**: 1.0.0
**Workflow Type**: architecture
**Score**: 100/100
**Created**: 2025-09-05T18:35:08.523Z
**Updated**: 2025-09-05T18:35:08.523Z

## Instruction
Set up and configure GitHub Actions workflows in the `.github/workflows/` directory for this Bun monorepo. The primary goal is to establish robust Continuous Integration (CI) and integrate the GitHub Model Context Protocol (MCP) for automated code review and analysis. Leverage the provided examples from `https://github.com/anthropics/claude-code-action` (specifically `pr-review-comprehensive.yml`, `claude-review.yml`, `claude.yml`, `ci.yml`) to inform the design, focusing on essential and useful features for this workspace. Ensure the workflows effectively utilize Bun for package management and script execution, are optimized for a monorepo environment with Turborepo, and adhere to all specified project rules and coding standards. The initial setup should be simple, improving existing workflows with basic but impactful features derived from the examples.

## Context
**Project Overview**: AI Dr. workflow orchestration system
**Technical Stack**: TypeScript, Bun, GitHub Actions, Turborepo
### Relevant Files
- `.github/workflows/*.yml`: File: .github/workflows/*.yml
- `package.json`: File: package.json
- `.ruler/mcp.json`: File: .ruler/mcp.json
- `.ruler/repository-navigation.md`: File: .ruler/repository-navigation.md
- `README.md`: File: README.md
### Dependencies
- @intellectronica/ruler
- @types/bun
- @types/minimatch
- @workspace/eslint-config
- @workspace/typescript-config
- minimatch
- prettier
- turbo
- typescript

## Success Criteria
1. ‚úÖ One or more `.github/workflows/*.yml` files are created or updated to implement basic CI/CD for the Bun monorepo.
2. ‚úÖ The CI workflow successfully runs `bun install`, `bun typecheck`, `bun lint`, `bun test`, and `bun build` (if applicable) on relevant changes.
3. ‚úÖ The workflows incorporate GitHub MCP for automated code review or analysis, triggered on pull requests, similar to the `claude-code-action` examples.
4. ‚úÖ Workflows correctly leverage Bun for all package management and script execution, and are optimized for monorepo performance (e.g., caching, Turborepo `affected` commands).
5. ‚úÖ All new or modified workflow files are syntactically valid YAML and pass GitHub Actions linting.
6. ‚úÖ A pull request with the proposed changes successfully executes all configured CI/CD and MCP workflows without errors.
7. ‚úÖ Project documentation (`README.md` or a new dedicated file like `docs/ci-cd.md`) is updated to describe the new GitHub Actions setup.
8. ‚úÖ All changes strictly adhere to the project's rules regarding Bun usage, monorepo structure, agent file management, coding style, security, and documentation.

## Constraints
- ‚ö†Ô∏è **Bun-first approach**: All package management and script execution within workflows must exclusively use `bun` (e.g., `bun install`, `bun run <script>`, `bun test`, `bun typecheck`, `bun lint`, `bun build`, `bun format`). Avoid `npm`, `yarn`, `pnpm`, `node`, `jest`, `vitest`, `webpack`, or `esbuild`.
- ‚ö†Ô∏è **Monorepo Structure Adherence**: Ensure all files, especially new workflow files, are placed in appropriate directories (e.g., `.github/workflows/`), strictly adhering to the principle of "DO NOT PUT FILES IN THE ROOT" except for designated configuration files. Leverage Turborepo for monorepo optimization.
- ‚ö†Ô∏è **Agent File Management**: If any changes are required for MCP server definitions or agent rules, these must be made exclusively in the `.ruler/` directory (e.g., `mcp.json`, `repository-navigation.md`). Directly editing generated files (like `CLAUDE.md`, `AGENTS.md`, `GEMINI.md`, `opencode.json`, `.cursor/rules`) is strictly forbidden. After modifying `.ruler/` files, `bun run ruler:apply` *must* be executed to propagate changes.
- ‚ö†Ô∏è **Code Quality**: All workflow YAML files should be well-structured, readable, and follow general best practices. Any accompanying scripts or code must adhere to the `coding-style.md` and `typescript.md` standards (e.g., kebab-case for filenames/directories, explicit exports, no `any` type, strict TypeScript, absolute imports for workspace packages, inline interfaces for function parameters).
- ‚ö†Ô∏è **Security**: Strictly avoid hardcoding or committing any secrets directly into workflow files. Use GitHub Secrets or environment variables for sensitive information, following the guidelines in `security.md` (e.g., server-only variables without `NEXT_PUBLIC_` prefix).
- ‚ö†Ô∏è **Development Workflow Integration**: The CI workflow should integrate the standard development sequence: `bun install`, `bun typecheck`, `bun lint`, `bun test`, and `bun build` (if applicable for deployable artifacts).
- ‚ö†Ô∏è **Documentation**: Thoroughly document the purpose, triggers, and steps of each new or modified workflow using YAML comments within the workflow file. Additionally, update the project's main `README.md` or create a new dedicated CI/CD documentation file (e.g., `docs/ci-cd.md`) to reflect the new setup, adhering to `documentation-management.md` principles.
- ‚ö†Ô∏è **Simplicity**: The initial setup should focus on basic yet effective CI and essential MCP integration, avoiding over-engineering or overly complex configurations for this first iteration.

## Clarifying Questions
1. ‚ùì Are there any existing `.github/workflows/*.yml` files that should be explicitly modified or removed, or should new files be created?
2. ‚ùì What specific level of detail or type of feedback is desired from the MCP agent in pull request comments (e.g., only critical issues, comprehensive review, specific rule sets)?
3. ‚ùì Which branches (e.g., `main`, `develop`, all feature branches) should primarily trigger the CI and MCP workflows?
4. ‚ùì What is the preferred caching strategy for Bun modules and Turborepo build outputs within the GitHub Actions environment?

## Discovered References
### Urls
- üîó `https://github.com` (Found in prompt text)
### Librarys
- üì¶ `bun` (Found in project dependencies)

## Expected Output
**Format**: structured_data
**Structure**: Structured output

## Inputs
- **Original Prompt** (text): research and help me setup my .github/workflows/*.yml files to get them setup for our bun monorepo. I want to make sure that they are correctly setup. I want to configure them to use github mcp (see https://github.com/anthropics/claude-code-action/blob/main/examples/pr-review-comprehensive.yml as example or https://github.com/anthropics/claude-code-action/blob/main/.github/workflows/claude-review.yml ) I also really like this example https://github.com/anthropics/claude-code-action/blob/main/.github/workflows/claude.yml - https://github.com/anthropics/claude-code-action/blob/main/.github/workflows/ci.yml keep it simple and just improve the ones we have with basic stuff you see here, thinking about what could be useful from my perspective to help me build in this workspace repo

## Validation
**Status**: ‚úÖ Valid
**Score**: 100/100

---
*Generated by AI Dr. Prompt Enhancer*
*This prompt includes comprehensive project rules and coding standards for self-contained execution*